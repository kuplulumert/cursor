<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluid Dynamics Handbook - Complete Educational Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Crimson+Pro:wght@400;600&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #7c3aed;
            --accent-color: #06b6d4;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --border-color: #e5e7eb;
            --shadow-light: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-heavy: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text-primary);
        }

        .handbook-container {
            display: flex;
            height: 100vh;
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-heavy);
        }

        .sidebar {
            width: 320px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid var(--border-color);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .handbook-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .handbook-subtitle {
            font-size: 12px;
            opacity: 0.9;
        }

        .progress-section {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .progress-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .progress-bar {
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            width: 5.6%;
            transition: width 0.5s ease;
        }

        .chapter-nav {
            flex: 1;
            overflow-y: auto;
            padding: 10px 0;
        }

        .chapter {
            margin-bottom: 8px;
        }

        .chapter-title {
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .chapter-title:hover {
            background: rgba(37, 99, 235, 0.1);
            transform: translateX(2px);
        }

        .chapter-icon {
            margin-right: 10px;
            color: var(--primary-color);
        }

        .chapter-sections {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .chapter-sections.expanded {
            max-height: 500px;
        }

        .section-item {
            padding: 10px 20px 10px 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .section-item:hover {
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary-color);
            transform: translateX(3px);
        }

        .section-item.active {
            background: var(--primary-color);
            color: white;
        }

        .section-status {
            font-size: 8px;
            color: #cbd5e1;
        }

        .section-item.active .section-status {
            color: rgba(255, 255, 255, 0.7);
        }

        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .content-header {
            padding: 20px 30px;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .breadcrumb {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .content-tools {
            display: flex;
            gap: 10px;
        }

        .tool-btn {
            padding: 8px 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .tool-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .content-main {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: var(--bg-primary);
        }

        .content-page {
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .page-title {
            font-size: 2.5em;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
            font-family: 'Crimson Pro', serif;
        }

        .page-subtitle {
            font-size: 1.2em;
            color: var(--text-secondary);
            margin-bottom: 30px;
            font-style: italic;
        }

        .content-text {
            font-size: 16px;
            margin-bottom: 25px;
            text-align: justify;
        }

        .definition-box,
        .formula-box,
        .example-box,
        .highlight-box {
            padding: 20px;
            margin: 25px 0;
            border-radius: 10px;
            border-left: 4px solid;
        }

        .definition-box {
            background: rgba(16, 185, 129, 0.05);
            border-left-color: var(--success-color);
        }

        .formula-box {
            background: rgba(37, 99, 235, 0.05);
            border-left-color: var(--primary-color);
        }

        .example-box {
            background: rgba(245, 158, 11, 0.05);
            border-left-color: var(--warning-color);
        }

        .highlight-box {
            background: rgba(124, 58, 237, 0.05);
            border-left-color: var(--secondary-color);
        }

        .definition-title,
        .formula-title,
        .example-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .section-heading {
            font-size: 1.8em;
            color: var(--primary-color);
            margin: 30px 0 20px 0;
            font-family: 'Crimson Pro', serif;
        }

        .subsection-heading {
            font-size: 1.3em;
            color: var(--secondary-color);
            margin: 25px 0 15px 0;
            font-weight: 600;
        }

        /* Interactive Diagrams */
        .diagram-container {
            margin: 30px 0;
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .diagram-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 15px;
            text-align: center;
        }

        .diagram-canvas {
            width: 100%;
            max-width: 600px;
            height: 300px;
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            display: block;
            margin: 0 auto 15px auto;
        }

        .diagram-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .diagram-btn {
            padding: 8px 16px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .diagram-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .diagram-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Knowledge Checks */
        .knowledge-check {
            background: rgba(245, 158, 11, 0.05);
            border: 1px solid var(--warning-color);
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
        }

        .check-title {
            font-weight: 600;
            color: var(--warning-color);
            margin-bottom: 15px;
            font-size: 16px;
        }

        .question {
            font-weight: 500;
            margin-bottom: 15px;
            font-size: 15px;
        }

        .answer-options {
            margin: 15px 0;
        }

        .answer-option {
            padding: 10px 15px;
            margin: 5px 0;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-option:hover {
            background: rgba(37, 99, 235, 0.1);
            border-color: var(--primary-color);
        }

        .answer-option.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .check-btn {
            background: var(--warning-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .check-btn:hover {
            background: var(--primary-color);
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-weight: 500;
        }

        .feedback.correct {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .feedback.incorrect {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }

        .footer-nav {
            margin-top: 50px;
            padding: 20px 0;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
        }

        .nav-btn {
            padding: 12px 24px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .nav-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .nav-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Search Modal */
        .search-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .search-container {
            background: var(--bg-primary);
            border-radius: 12px;
            box-shadow: var(--shadow-heavy);
            width: 90%;
            max-width: 600px;
            max-height: 70vh;
            overflow: hidden;
        }

        .search-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            outline: none;
        }

        .search-input:focus {
            border-color: var(--primary-color);
        }

        .search-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: var(--text-secondary);
            padding: 8px;
        }

        .search-results {
            max-height: 50vh;
            overflow-y: auto;
            padding: 10px 0;
        }

        .search-result {
            padding: 15px 20px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s ease;
        }

        .search-result:hover {
            background: var(--bg-secondary);
        }

        .result-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .result-chapter {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .result-snippet {
            font-size: 14px;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .result-highlight {
            background: yellow;
            padding: 1px 2px;
            border-radius: 2px;
        }

        .search-suggestions {
            padding: 20px;
        }

        .suggestions-title {
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-size: 14px;
        }

        .suggestion-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .suggestion-tag {
            padding: 6px 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .suggestion-tag:hover {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        /* Notes System */
        .notes-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .notes-container {
            background: var(--bg-primary);
            border-radius: 12px;
            box-shadow: var(--shadow-heavy);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .notes-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .notes-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <div class="handbook-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="handbook-title">
                    <i class="fas fa-book-open"></i>
                    Fluid Dynamics Handbook
                </div>
                <div class="handbook-subtitle">Complete Educational Platform</div>
            </div>

            <div class="progress-section">
                <div class="progress-title">Learning Progress</div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <div class="progress-text" style="font-size: 12px; color: var(--text-secondary); margin-top: 8px; text-align: center;">
                    1 of 18 sections completed
                </div>
            </div>

            <nav class="chapter-nav">
                <div class="chapter">
                    <div class="chapter-title" data-chapter="fundamentals">
                        <div>
                            <i class="fas fa-flask chapter-icon"></i>
                            Fundamentals
                        </div>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="chapter-sections expanded">
                        <div class="section-item active" data-section="introduction">
                            Introduction to Fluids
                            <span class="section-status"><i class="fas fa-check-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="properties">
                            Fluid Properties
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="classification">
                            Flow Classification
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                    </div>
                </div>

                <div class="chapter">
                    <div class="chapter-title" data-chapter="kinematics">
                        <div>
                            <i class="fas fa-wind chapter-icon"></i>
                            Fluid Kinematics
                        </div>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="chapter-sections">
                        <div class="section-item" data-section="velocity-field">
                            Velocity Fields
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="streamlines">
                            Streamlines & Pathlines
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="acceleration">
                            Acceleration Fields
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                    </div>
                </div>

                <div class="chapter">
                    <div class="chapter-title" data-chapter="conservation">
                        <div>
                            <i class="fas fa-balance-scale chapter-icon"></i>
                            Conservation Laws
                        </div>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="chapter-sections">
                        <div class="section-item" data-section="continuity">
                            Continuity Equation
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="momentum">
                            Momentum Equation
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="energy">
                            Energy Equation
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                    </div>
                </div>

                <div class="chapter">
                    <div class="chapter-title" data-chapter="applications">
                        <div>
                            <i class="fas fa-cogs chapter-icon"></i>
                            Applications
                        </div>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="chapter-sections">
                        <div class="section-item" data-section="bernoulli">
                            Bernoulli's Equation
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="pipe-flow">
                            Pipe Flow
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="external-flow">
                            External Flow
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                    </div>
                </div>

                <div class="chapter">
                    <div class="chapter-title" data-chapter="dimensional">
                        <div>
                            <i class="fas fa-calculator chapter-icon"></i>
                            Dimensional Analysis
                        </div>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="chapter-sections">
                        <div class="section-item" data-section="buckingham-pi">
                            Buckingham Pi Theorem
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="similarity">
                            Dynamic Similarity
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="model-testing">
                            Model Testing
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                    </div>
                </div>

                <div class="chapter">
                    <div class="chapter-title" data-chapter="advanced">
                        <div>
                            <i class="fas fa-microchip chapter-icon"></i>
                            Advanced Topics
                        </div>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="chapter-sections">
                        <div class="section-item" data-section="cfd-intro">
                            CFD Introduction
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="turbulence">
                            Turbulence Modeling
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                        <div class="section-item" data-section="compressible">
                            Compressible Flow
                            <span class="section-status"><i class="fas fa-circle"></i></span>
                        </div>
                    </div>
                </div>
            </nav>
        </div>

        <div class="content-area">
            <div class="content-header">
                <div class="breadcrumb" id="breadcrumb">
                    Fundamentals › Introduction to Fluids
                </div>
                <div class="content-tools">
                    <div class="tool-btn" id="bookmark-btn">
                        <i class="fas fa-bookmark"></i>
                        Bookmark
                    </div>
                    <div class="tool-btn" id="print-btn">
                        <i class="fas fa-print"></i>
                        Print
                    </div>
                    <div class="tool-btn" id="search-btn">
                        <i class="fas fa-search"></i>
                        Search
                    </div>
                    <div class="tool-btn" id="notes-btn">
                        <i class="fas fa-sticky-note"></i>
                        Notes
                    </div>
                </div>
            </div>

            <div class="content-main">
                <div class="content-page fade-in" id="content-container">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div id="search-modal" class="search-modal">
        <div class="search-container">
            <div class="search-header">
                <input type="text" id="search-input" class="search-input" placeholder="Search the handbook..." autocomplete="off">
                <button id="search-close" class="search-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="search-results" class="search-results">
                <div class="search-suggestions">
                    <div class="suggestions-title">Popular Topics</div>
                    <div class="suggestion-tags">
                        <span class="suggestion-tag" data-term="bernoulli">Bernoulli's Equation</span>
                        <span class="suggestion-tag" data-term="reynolds">Reynolds Number</span>
                        <span class="suggestion-tag" data-term="continuity">Continuity Equation</span>
                        <span class="suggestion-tag" data-term="viscosity">Viscosity</span>
                        <span class="suggestion-tag" data-term="laminar">Laminar Flow</span>
                        <span class="suggestion-tag" data-term="turbulent">Turbulent Flow</span>
                        <span class="suggestion-tag" data-term="pressure">Pressure</span>
                        <span class="suggestion-tag" data-term="velocity">Velocity</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notes Modal -->
    <div id="notes-modal" class="notes-modal">
        <div class="notes-container">
            <div class="notes-header">
                <div class="notes-title">
                    <i class="fas fa-sticky-note"></i>
                    My Notes
                </div>
                <button id="notes-close" class="search-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <!-- Notes functionality will be added -->
        </div>
    </div>

    <script>
        // Global variables
        let currentChapter = 'fundamentals';
        let currentSection = 'introduction';
        let completedSections = ['introduction'];
        let bookmarks = [];
        let notes = [];
        let currentNoteId = null;

        // Content data structure - Complete 18 sections
        const handbookContent = {
            fundamentals: {
                title: "Fundamentals",
                sections: {
                    introduction: {
                        title: "Introduction to Fluids",
                        content: "introduction"
                    },
                    properties: {
                        title: "Fluid Properties",
                        content: "properties"
                    },
                    classification: {
                        title: "Flow Classification", 
                        content: "classification"
                    }
                }
            },
            kinematics: {
                title: "Fluid Kinematics",
                sections: {
                    "velocity-field": {
                        title: "Velocity Fields",
                        content: "velocity-field"
                    },
                    streamlines: {
                        title: "Streamlines & Pathlines",
                        content: "streamlines"
                    },
                    acceleration: {
                        title: "Acceleration Fields",
                        content: "acceleration"
                    }
                }
            },
            conservation: {
                title: "Conservation Laws",
                sections: {
                    continuity: {
                        title: "Continuity Equation",
                        content: "continuity"
                    },
                    momentum: {
                        title: "Momentum Equation",
                        content: "momentum"
                    },
                    energy: {
                        title: "Energy Equation",
                        content: "energy"
                    }
                }
            },
            applications: {
                title: "Applications",
                sections: {
                    bernoulli: {
                        title: "Bernoulli's Equation",
                        content: "bernoulli"
                    },
                    "pipe-flow": {
                        title: "Pipe Flow",
                        content: "pipe-flow"
                    },
                    "external-flow": {
                        title: "External Flow",
                        content: "external-flow"
                    }
                }
            },
            dimensional: {
                title: "Dimensional Analysis",
                sections: {
                    "buckingham-pi": {
                        title: "Buckingham Pi Theorem",
                        content: "buckingham-pi"
                    },
                    similarity: {
                        title: "Dynamic Similarity",
                        content: "similarity"
                    },
                    "model-testing": {
                        title: "Model Testing",
                        content: "model-testing"
                    }
                }
            },
            advanced: {
                title: "Advanced Topics",
                sections: {
                    "cfd-intro": {
                        title: "CFD Introduction",
                        content: "cfd-intro"
                    },
                    turbulence: {
                        title: "Turbulence Modeling",
                        content: "turbulence"
                    },
                    compressible: {
                        title: "Compressible Flow",
                        content: "compressible"
                    }
                }
            }
        };

        // Initialize the application
        function init() {
            console.log('Initializing Complete Fluid Dynamics Handbook...');
            
            setupNavigation();
            setupTools();
            updateProgress();
            loadSectionContent('introduction'); // Load initial content
            
            console.log('Complete Handbook initialized successfully!');
        }

        function setupNavigation() {
            console.log('Setting up navigation...');
            
            // Chapter title clicks
            const chapterTitles = document.querySelectorAll('.chapter-title');
            console.log('Found', chapterTitles.length, 'chapter titles');
            
            chapterTitles.forEach((title, index) => {
                const chapter = title.dataset.chapter;
                console.log(`Setting up chapter ${index}: ${chapter}`);
                
                title.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Chapter clicked:', chapter);
                    toggleChapter(chapter);
                });
            });

            // Section clicks
            const sectionItems = document.querySelectorAll('.section-item');
            console.log('Found', sectionItems.length, 'section items');
            
            sectionItems.forEach((item, index) => {
                const section = item.dataset.section;
                console.log(`Setting up section ${index}: ${section}`);
                
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Section clicked:', section);
                    navigateToSection(section);
                });
            });
            
            console.log('Navigation setup complete!');
        }

        function setupTools() {
            console.log('Setting up tools...');
            
            // Bookmark functionality
            const bookmarkBtn = document.getElementById('bookmark-btn');
            if (bookmarkBtn) {
                bookmarkBtn.addEventListener('click', () => {
                    console.log('Bookmark clicked');
                    toggleBookmark();
                });
            }

            // Print functionality
            const printBtn = document.getElementById('print-btn');
            if (printBtn) {
                printBtn.addEventListener('click', () => {
                    console.log('Print clicked');
                    window.print();
                });
            }

            // Search functionality
            const searchBtn = document.getElementById('search-btn');
            if (searchBtn) {
                searchBtn.addEventListener('click', () => {
                    console.log('Search clicked');
                    showSearchModal();
                });
            }

            // Notes functionality
            const notesBtn = document.getElementById('notes-btn');
            if (notesBtn) {
                notesBtn.addEventListener('click', () => {
                    console.log('Notes clicked');
                    showNotesModal();
                });
            }

            setupSearchTools();
        }

        function toggleChapter(chapterKey) {
            console.log('Toggling chapter:', chapterKey);
            
            const chapterElement = document.querySelector(`[data-chapter="${chapterKey}"]`);
            if (!chapterElement) {
                console.error('Chapter element not found for:', chapterKey);
                return;
            }
            
            const sectionsElement = chapterElement.nextElementSibling;
            if (!sectionsElement) {
                console.error('Sections element not found for chapter:', chapterKey);
                return;
            }
            
            const chevron = chapterElement.querySelector('.fas.fa-chevron-down, .fas.fa-chevron-up');
            if (!chevron) {
                console.error('Chevron element not found for chapter:', chapterKey);
                return;
            }
            
            console.log('Current expanded state:', sectionsElement.classList.contains('expanded'));
            
            if (sectionsElement.classList.contains('expanded')) {
                sectionsElement.classList.remove('expanded');
                chevron.className = 'fas fa-chevron-down';
                console.log('Collapsed chapter:', chapterKey);
            } else {
                sectionsElement.classList.add('expanded');
                chevron.className = 'fas fa-chevron-up';
                console.log('Expanded chapter:', chapterKey);
            }
        }

        function navigateToSection(sectionKey) {
            console.log('Navigating to section:', sectionKey);
            
            // Find which chapter this section belongs to
            let targetChapter = null;
            for (const [chapterKey, chapterData] of Object.entries(handbookContent)) {
                if (chapterData.sections[sectionKey]) {
                    targetChapter = chapterKey;
                    break;
                }
            }

            if (!targetChapter) {
                console.error('Section not found:', sectionKey);
                return;
            }

            // Update current state
            currentChapter = targetChapter;
            currentSection = sectionKey;

            // Update navigation state
            document.querySelectorAll('.section-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionKey}"]`).classList.add('active');

            // Expand the target chapter if not expanded
            const targetChapterElement = document.querySelector(`[data-chapter="${targetChapter}"]`);
            const targetSectionsElement = targetChapterElement.nextElementSibling;
            if (!targetSectionsElement.classList.contains('expanded')) {
                toggleChapter(targetChapter);
            }

            // Update breadcrumb
            updateBreadcrumb();

            // Load content
            loadSectionContent(sectionKey);

            // Mark as completed
            if (!completedSections.includes(sectionKey)) {
                completedSections.push(sectionKey);
                updateSectionStatus(sectionKey);
                updateProgress();
            }
        }

        function updateBreadcrumb() {
            const chapterTitle = handbookContent[currentChapter]?.title || 'Unknown Chapter';
            const sectionTitle = handbookContent[currentChapter]?.sections[currentSection]?.title || 'Unknown Section';
            
            document.getElementById('breadcrumb').textContent = `${chapterTitle} › ${sectionTitle}`;
        }

        function loadSectionContent(sectionKey) {
            console.log('Loading content for:', sectionKey);
            
            const container = document.getElementById('content-container');
            
            // Complete content mapping
            const contentMap = {
                introduction: getIntroductionContent(),
                properties: getPropertiesContent(),
                classification: getClassificationContent(),
                "velocity-field": getVelocityFieldContent(),
                streamlines: getStreamlinesContent(),
                acceleration: getAccelerationContent(),
                continuity: getContinuityContent(),
                momentum: getMomentumContent(),
                energy: getEnergyContent(),
                bernoulli: getBernoulliContent(),
                "pipe-flow": getPipeFlowContent(),
                "external-flow": getExternalFlowContent(),
                "buckingham-pi": getBuckinghamPiContent(),
                similarity: getSimilarityContent(),
                "model-testing": getModelTestingContent(),
                "cfd-intro": getCFDIntroContent(),
                turbulence: getTurbulenceContent(),
                compressible: getCompressibleContent()
            };
            
            const content = contentMap[sectionKey] || getDefaultContent(sectionKey);
            container.innerHTML = content;
            container.className = 'content-page fade-in';
            
            // Setup interactive elements after content loads
            setTimeout(() => {
                setupInteractiveElements();
            }, 100);
            
            // Re-render MathJax
            if (window.MathJax) {
                MathJax.typesetPromise([container]).then(() => {
                    console.log('MathJax rendering complete for:', sectionKey);
                });
            }
        }

        function setupInteractiveElements() {
            setupDiagramInteractions();
            setupKnowledgeChecks();
        }

        function setupDiagramInteractions() {
            // Placeholder for diagram interactions
            console.log('Setting up diagram interactions...');
        }

        function setupKnowledgeChecks() {
            // Setup answer option interactions
            document.querySelectorAll('.answer-option').forEach(option => {
                option.addEventListener('click', () => {
                    // Remove selected class from siblings
                    option.parentElement.querySelectorAll('.answer-option').forEach(o => {
                        o.classList.remove('selected');
                    });
                    // Add selected class to clicked option
                    option.classList.add('selected');
                });
            });
        }

        function checkAnswer(sectionKey, correctAnswer) {
            const selectedOption = document.querySelector('#feedback-' + sectionKey).parentElement.querySelector('.answer-option.selected');
            const feedback = document.getElementById('feedback-' + sectionKey);
            
            if (!selectedOption) {
                feedback.textContent = 'Please select an answer first.';
                feedback.className = 'feedback incorrect';
                return;
            }
            
            const userAnswer = selectedOption.dataset.answer;
            const isCorrect = userAnswer === correctAnswer;
            
            feedback.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');
            feedback.textContent = isCorrect ? 
                'Correct! Well done.' : 
                'Incorrect. The correct answer is ' + correctAnswer.toUpperCase() + '.';
            
            // Disable all options
            selectedOption.parentElement.querySelectorAll('.answer-option').forEach(option => {
                option.style.pointerEvents = 'none';
                if (option.dataset.answer === correctAnswer) {
                    option.style.background = 'var(--success-color)';
                    option.style.color = 'white';
                }
            });
        }

        function updateSectionStatus(sectionKey) {
            const sectionElement = document.querySelector(`[data-section="${sectionKey}"]`);
            if (sectionElement) {
                const statusIcon = sectionElement.querySelector('.section-status i');
                if (statusIcon) {
                    statusIcon.className = 'fas fa-check-circle';
                    statusIcon.style.color = 'var(--success-color)';
                }
            }
        }

        function updateProgress() {
            const totalSections = 18;
            const completedCount = completedSections.length;
            const progressPercent = (completedCount / totalSections) * 100;
            
            document.querySelector('.progress-fill').style.width = `${progressPercent}%`;
            document.querySelector('.progress-text').textContent = `${completedCount} of ${totalSections} sections completed`;
        }

        function toggleBookmark() {
            const currentPage = `${currentChapter}-${currentSection}`;
            const bookmarkBtn = document.getElementById('bookmark-btn');
            
            if (bookmarks.includes(currentPage)) {
                bookmarks = bookmarks.filter(b => b !== currentPage);
                bookmarkBtn.innerHTML = '<i class="fas fa-bookmark"></i> Bookmark';
            } else {
                bookmarks.push(currentPage);
                bookmarkBtn.innerHTML = '<i class="fas fa-bookmark"></i> Bookmarked';
            }
        }

        // Search functionality
        function showSearchModal() {
            const modal = document.getElementById('search-modal');
            modal.style.display = 'flex';
            document.getElementById('search-input').focus();
        }

        function hideSearchModal() {
            const modal = document.getElementById('search-modal');
            modal.style.display = 'none';
            document.getElementById('search-input').value = '';
        }

        function showNotesModal() {
            const modal = document.getElementById('notes-modal');
            modal.style.display = 'flex';
        }

        function hideNotesModal() {
            const modal = document.getElementById('notes-modal');
            modal.style.display = 'none';
        }

        function setupSearchTools() {
            // Search input handler
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    if (e.target.value.trim()) {
                        performSearch(e.target.value);
                    } else {
                        showSearchSuggestions();
                    }
                });
            }

            // Search close button
            const searchClose = document.getElementById('search-close');
            if (searchClose) {
                searchClose.addEventListener('click', hideSearchModal);
            }

            // Close modal when clicking outside
            const searchModal = document.getElementById('search-modal');
            if (searchModal) {
                searchModal.addEventListener('click', (e) => {
                    if (e.target.id === 'search-modal') {
                        hideSearchModal();
                    }
                });
            }

            showSearchSuggestions();
        }

        function performSearch(query) {
            // Simple search implementation
            console.log('Searching for:', query);
            const resultsContainer = document.getElementById('search-results');
            resultsContainer.innerHTML = `<div style="padding: 20px; text-align: center; color: var(--text-secondary);">Search results for "${query}" will appear here...</div>`;
        }

        function showSearchSuggestions() {
            const container = document.getElementById('search-results');
            container.innerHTML = `
                <div class="search-suggestions">
                    <div class="suggestions-title">Popular Topics</div>
                    <div class="suggestion-tags">
                        <span class="suggestion-tag" data-term="bernoulli">Bernoulli's Equation</span>
                        <span class="suggestion-tag" data-term="reynolds">Reynolds Number</span>
                        <span class="suggestion-tag" data-term="continuity">Continuity Equation</span>
                        <span class="suggestion-tag" data-term="viscosity">Viscosity</span>
                        <span class="suggestion-tag" data-term="laminar">Laminar Flow</span>
                        <span class="suggestion-tag" data-term="turbulent">Turbulent Flow</span>
                        <span class="suggestion-tag" data-term="pressure">Pressure</span>
                        <span class="suggestion-tag" data-term="velocity">Velocity</span>
                    </div>
                </div>
            `;
        }

        // Navigation helper function
        function getNavigationFooter(sectionKey) {
            const allSections = [
                'introduction', 'properties', 'classification',
                'velocity-field', 'streamlines', 'acceleration', 
                'continuity', 'momentum', 'energy',
                'bernoulli', 'pipe-flow', 'external-flow',
                'buckingham-pi', 'similarity', 'model-testing',
                'cfd-intro', 'turbulence', 'compressible'
            ];
            
            const currentIndex = allSections.indexOf(sectionKey);
            const prevSection = currentIndex > 0 ? allSections[currentIndex - 1] : null;
            const nextSection = currentIndex < allSections.length - 1 ? allSections[currentIndex + 1] : null;
            
            return `
                <div class="footer-nav">
                    ${prevSection ? 
                        `<button class="nav-btn" onclick="navigateToSection('${prevSection}')">
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>` : 
                        '<button class="nav-btn" disabled>Previous</button>'
                    }
                    ${nextSection ? 
                        `<button class="nav-btn" onclick="navigateToSection('${nextSection}')">
                            Next <i class="fas fa-arrow-right"></i>
                        </button>` : 
                        '<button class="nav-btn" disabled>Next</button>'
                    }
                </div>
            `;
        }

        // I'll continue with content functions in the next part due to length limits
        // For now, let me create a comprehensive introduction to demonstrate
        function getIntroductionContent() {
            return `
                <h1 class="page-title">Introduction to Fluids</h1>
                <p class="page-subtitle">Understanding the fundamentals of fluid mechanics</p>

                <div class="definition-box">
                    <div class="definition-title">Definition: Fluid</div>
                    <p>A <strong>fluid</strong> is a substance that continuously deforms (flows) under an applied shear stress, regardless of how small that stress may be. This includes both liquids and gases.</p>
                </div>

                <div class="content-text">
                    Fluid mechanics is the branch of physics that studies the motion of fluids (liquids and gases) and the forces acting on them. It has applications in numerous fields including aerodynamics, hydraulics, meteorology, oceanography, and biomedical engineering.
                </div>

                <h2 class="section-heading">Key Characteristics of Fluids</h2>

                <div class="content-text">
                    Understanding fluid behavior requires knowledge of several fundamental characteristics:
                </div>

                <div class="subsection-heading">1. Continuum Assumption</div>
                <div class="content-text">
                    Fluids are treated as continuous media, ignoring the molecular structure. This assumption is valid when the characteristic length scale of the flow is much larger than the mean free path of molecules.
                </div>

                <div class="subsection-heading">2. No-Slip Condition</div>
                <div class="content-text">
                    At a solid boundary, the fluid velocity equals the velocity of the boundary. For stationary walls, this means the fluid velocity is zero at the wall.
                </div>

                <div class="subsection-heading">3. Viscosity</div>
                <div class="content-text">
                    Viscosity represents the internal friction in a fluid that resists relative motion between fluid layers.
                </div>

                <div class="formula-box">
                    <div class="formula-title">Newton's Law of Viscosity</div>
                    <p>For a Newtonian fluid, the shear stress is proportional to the velocity gradient:</p>
                    <p style="text-align: center; margin: 15px 0; font-size: 18px;">
                        $$\\tau = \\mu \\frac{du}{dy}$$
                    </p>
                    <p style="margin-top: 15px; font-size: 14px;">where τ is shear stress, μ is dynamic viscosity, and du/dy is velocity gradient</p>
                </div>

                <div class="diagram-container">
                    <div class="diagram-title">Interactive Molecular Structure Diagram</div>
                    <canvas class="diagram-canvas" id="molecular-diagram" width="600" height="300"></canvas>
                    <div class="diagram-controls">
                        <button class="diagram-btn active" data-state="solid">Solid</button>
                        <button class="diagram-btn" data-state="liquid">Liquid</button>
                        <button class="diagram-btn" data-state="gas">Gas</button>
                    </div>
                </div>

                <h2 class="section-heading">Applications of Fluid Mechanics</h2>

                <div class="example-box">
                    <div class="example-title">Real-World Applications</div>
                    <p><strong>Aerospace:</strong> Aircraft design, rocket propulsion, atmospheric entry</p>
                    <p><strong>Automotive:</strong> Aerodynamics, engine cooling, fuel injection</p>
                    <p><strong>Civil Engineering:</strong> Water distribution, dam design, wind loading</p>
                    <p><strong>Biomedical:</strong> Blood flow, respiratory system, drug delivery</p>
                    <p><strong>Environmental:</strong> Ocean currents, weather prediction, pollution dispersal</p>
                </div>

                <div class="knowledge-check">
                    <div class="check-title">Knowledge Check</div>
                    <div class="question">What is the key difference between a fluid and a solid?</div>
                    <div class="answer-options">
                        <div class="answer-option" data-answer="a">A) Fluids have higher density</div>
                        <div class="answer-option" data-answer="b">B) Fluids continuously deform under shear stress</div>
                        <div class="answer-option" data-answer="c">C) Fluids are always transparent</div>
                        <div class="answer-option" data-answer="d">D) Fluids cannot transmit forces</div>
                    </div>
                    <button class="check-btn" onclick="checkAnswer('introduction', 'b')">Check Answer</button>
                    <div class="feedback" id="feedback-introduction"></div>
                </div>

                ${getNavigationFooter('introduction')}
            `;
        }

        // Placeholder content functions - these will be expanded with full content
        function getPropertiesContent() {
            return `
                <h1 class="page-title">Fluid Properties</h1>
                <p class="page-subtitle">Physical and thermodynamic characteristics of fluids</p>
                <div class="content-text">Comprehensive content on fluid properties including density, viscosity, compressibility, and surface tension...</div>
                ${getNavigationFooter('properties')}
            `;
        }

        function getClassificationContent() {
            return `
                <h1 class="page-title">Flow Classification</h1>
                <p class="page-subtitle">Different types of fluid flow patterns</p>
                <div class="content-text">Detailed classification of fluid flows: laminar vs turbulent, steady vs unsteady, compressible vs incompressible...</div>
                ${getNavigationFooter('classification')}
            `;
        }

        function getVelocityFieldContent() {
            return `
                <h1 class="page-title">Velocity Fields</h1>
                <p class="page-subtitle">Describing fluid motion through velocity vectors</p>
                <div class="content-text">Complete coverage of velocity field representation, Eulerian and Lagrangian descriptions...</div>
                ${getNavigationFooter('velocity-field')}
            `;
        }

        function getStreamlinesContent() {
            return `
                <h1 class="page-title">Streamlines & Pathlines</h1>
                <p class="page-subtitle">Visualization of fluid flow patterns</p>
                <div class="content-text">Comprehensive explanation of flow visualization techniques including streamlines, pathlines, streaklines...</div>
                ${getNavigationFooter('streamlines')}
            `;
        }

        function getAccelerationContent() {
            return `
                <h1 class="page-title">Acceleration Fields</h1>
                <p class="page-subtitle">Rate of change of velocity in fluid flow</p>
                <div class="content-text">Detailed analysis of fluid acceleration including material derivative, local and convective acceleration...</div>
                ${getNavigationFooter('acceleration')}
            `;
        }

        function getContinuityContent() {
            return `
                <h1 class="page-title">Continuity Equation</h1>
                <p class="page-subtitle">Conservation of mass in fluid flow</p>
                <div class="content-text">Complete derivation and applications of the continuity equation for various flow conditions...</div>
                ${getNavigationFooter('continuity')}
            `;
        }

        function getMomentumContent() {
            return `
                <h1 class="page-title">Momentum Equation</h1>
                <p class="page-subtitle">Newton's second law for fluid flow</p>
                <div class="content-text">Comprehensive treatment of momentum conservation including Navier-Stokes equations...</div>
                ${getNavigationFooter('momentum')}
            `;
        }

        function getEnergyContent() {
            return `
                <h1 class="page-title">Energy Equation</h1>
                <p class="page-subtitle">Conservation of energy in fluid systems</p>
                <div class="content-text">Energy conservation principles and their applications in fluid mechanics...</div>
                ${getNavigationFooter('energy')}
            `;
        }

        function getBernoulliContent() {
            return `
                <h1 class="page-title">Bernoulli's Equation</h1>
                <p class="page-subtitle">Energy conservation for inviscid flow</p>
                <div class="content-text">Derivation, assumptions, and applications of Bernoulli's equation...</div>
                ${getNavigationFooter('bernoulli')}
            `;
        }

        function getPipeFlowContent() {
            return `
                <h1 class="page-title">Pipe Flow</h1>
                <p class="page-subtitle">Internal flow analysis and design</p>
                <div class="content-text">Comprehensive pipe flow analysis including friction factors, pressure losses...</div>
                ${getNavigationFooter('pipe-flow')}
            `;
        }

        function getExternalFlowContent() {
            return `
                <h1 class="page-title">External Flow</h1>
                <p class="page-subtitle">Flow around objects and boundary layers</p>
                <div class="content-text">Boundary layer theory, drag and lift analysis for external flows...</div>
                ${getNavigationFooter('external-flow')}
            `;
        }

        function getBuckinghamPiContent() {
            return `
                <h1 class="page-title">Buckingham Pi Theorem</h1>
                <p class="page-subtitle">Systematic approach to dimensional analysis</p>
                <div class="content-text">Complete methodology for dimensional analysis using Buckingham Pi theorem...</div>
                ${getNavigationFooter('buckingham-pi')}
            `;
        }

        function getSimilarityContent() {
            return `
                <h1 class="page-title">Dynamic Similarity</h1>
                <p class="page-subtitle">Scaling laws and similarity criteria</p>
                <div class="content-text">Similarity theory and its applications in model testing and scaling...</div>
                ${getNavigationFooter('similarity')}
            `;
        }

        function getModelTestingContent() {
            return `
                <h1 class="page-title">Model Testing</h1>
                <p class="page-subtitle">Practical applications of similarity theory</p>
                <div class="content-text">Model testing techniques and data interpretation for engineering applications...</div>
                ${getNavigationFooter('model-testing')}
            `;
        }

        function getCFDIntroContent() {
            return `
                <h1 class="page-title">CFD Introduction</h1>
                <p class="page-subtitle">Computational Fluid Dynamics fundamentals</p>
                <div class="content-text">Introduction to CFD methods, numerical techniques, and software applications...</div>
                ${getNavigationFooter('cfd-intro')}
            `;
        }

        function getTurbulenceContent() {
            return `
                <h1 class="page-title">Turbulence Modeling</h1>
                <p class="page-subtitle">Approaches to modeling turbulent flows</p>
                <div class="content-text">Turbulence modeling techniques including RANS, LES, and DNS approaches...</div>
                ${getNavigationFooter('turbulence')}
            `;
        }

        function getCompressibleContent() {
            return `
                <h1 class="page-title">Compressible Flow</h1>
                <p class="page-subtitle">High-speed gas dynamics</p>
                <div class="content-text">Compressible flow theory including shock waves, expansion waves, and nozzle flows...</div>
                ${getNavigationFooter('compressible')}
            `;
        }

        function getDefaultContent(sectionKey) {
            const sectionData = handbookContent[currentChapter]?.sections[sectionKey];
            return `
                <h1 class="page-title">${sectionData?.title || 'Section'}</h1>
                <p class="page-subtitle">Content is being prepared...</p>
                
                <div class="content-text">
                    This section contains comprehensive content on ${sectionData?.title?.toLowerCase() || 'this topic'}. 
                    Full educational material with interactive diagrams, examples, and knowledge checks will be available here.
                </div>
                
                ${getNavigationFooter(sectionKey)}
            `;
        }

        // Initialize when page loads
        window.addEventListener('load', function() {
            console.log('Window loaded, initializing complete handbook...');
            init();
        });

        // Handle MathJax rendering
        window.addEventListener('load', function() {
            if (window.MathJax) {
                MathJax.typesetPromise().then(() => {
                    console.log('Initial MathJax rendering complete');
                });
            }
        });
    </script>
</body>
</html>